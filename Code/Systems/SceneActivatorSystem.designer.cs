// ------------------------------------------------------------------------------
//  <autogenerated>
//      This code was generated by a tool.
//      Mono Runtime Version: 2.0.50727.1433
// 
//      Changes to this file may cause incorrect behavior and will be lost if 
//      the code is regenerated.
//  </autogenerated>
// ------------------------------------------------------------------------------

namespace FlipCube {
    using FlipCube;
    using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.Linq;
    using uFrame.ECS;
    using uFrame.Kernel;
    using UniRx;
    using UnityEngine;
    
    
    public partial class SceneActivatorSystemBase : uFrame.ECS.EcsSystem {
        
        private IEcsComponentManagerOf<SceneData> _SceneDataManager;
        
        private IEcsComponentManagerOf<SceneInstance> _SceneInstanceManager;
        
        private IEcsComponentManagerOf<GameDependency> _GameDependencyManager;
        
        private IEcsComponentManagerOf<GameDependencySceneData> _GameDependencySceneDataManager;
        
        public IEcsComponentManagerOf<SceneData> SceneDataManager {
            get {
                return _SceneDataManager;
            }
            set {
                _SceneDataManager = value;
            }
        }
        
        public IEcsComponentManagerOf<SceneInstance> SceneInstanceManager {
            get {
                return _SceneInstanceManager;
            }
            set {
                _SceneInstanceManager = value;
            }
        }
        
        public IEcsComponentManagerOf<GameDependency> GameDependencyManager {
            get {
                return _GameDependencyManager;
            }
            set {
                _GameDependencyManager = value;
            }
        }
        
        public IEcsComponentManagerOf<GameDependencySceneData> GameDependencySceneDataManager {
            get {
                return _GameDependencySceneDataManager;
            }
            set {
                _GameDependencySceneDataManager = value;
            }
        }
        
        public override void Setup() {
            base.Setup();
            SceneDataManager = ComponentSystem.RegisterComponent<SceneData>(94);
            SceneInstanceManager = ComponentSystem.RegisterComponent<SceneInstance>(95);
            GameDependencyManager = ComponentSystem.RegisterComponent<GameDependency>(96);
            GameDependencySceneDataManager = ComponentSystem.RegisterGroup<GameDependencySceneDataGroup,GameDependencySceneData>();
            SceneDataManager.CreatedObservable.Subscribe(SceneDataCreatedFilter).DisposeWith(this);
            SceneInstanceManager.CreatedObservable.Subscribe(SceneInstanceCreatedFilter).DisposeWith(this);
            SceneInstanceManager.RemovedObservable.Subscribe(_=>SceneInstanceComponentDestroyed(_,_)).DisposeWith(this);
            this.OnEvent<FlipCube.ConstructScene>().Subscribe(_=>{ SceneActivatorSystemConstructSceneFilter(_); }).DisposeWith(this);
            this.OnEvent<FlipCube.DeconstructScene>().Subscribe(_=>{ SceneActivatorSystemDeconstructSceneFilter(_); }).DisposeWith(this);
        }
        
        protected virtual void SceneDataCreated(SceneData data, SceneData group) {
        }
        
        protected void SceneDataCreatedFilter(SceneData data) {
            var GroupSceneData = SceneDataManager[data.EntityId];
            if (GroupSceneData == null) {
                return;
            }
            if (!GroupSceneData.Enabled) {
                return;
            }
            this.SceneDataCreated(data, GroupSceneData);
        }
        
        protected virtual void SceneInstanceCreated(SceneInstance data, SceneInstance group) {
        }
        
        protected void SceneInstanceCreatedFilter(SceneInstance data) {
            var GroupSceneInstance = SceneInstanceManager[data.EntityId];
            if (GroupSceneInstance == null) {
                return;
            }
            if (!GroupSceneInstance.Enabled) {
                return;
            }
            this.SceneInstanceCreated(data, GroupSceneInstance);
        }
        
        protected virtual void SceneInstanceComponentDestroyed(SceneInstance data, SceneInstance group) {
        }
        
        protected void SceneInstanceComponentDestroyedFilter(SceneInstance data) {
            var GroupSceneInstance = SceneInstanceManager[data.EntityId];
            if (GroupSceneInstance == null) {
                return;
            }
            if (!GroupSceneInstance.Enabled) {
                return;
            }
            this.SceneInstanceComponentDestroyed(data, GroupSceneInstance);
        }
        
        protected virtual void SceneActivatorSystemConstructSceneHandler(FlipCube.ConstructScene data, SceneData scenedata) {
        }
        
        protected void SceneActivatorSystemConstructSceneFilter(FlipCube.ConstructScene data) {
            var SceneDataSceneData = SceneDataManager[data.SceneData];
            if (SceneDataSceneData == null) {
                return;
            }
            if (!SceneDataSceneData.Enabled) {
                return;
            }
            this.SceneActivatorSystemConstructSceneHandler(data, SceneDataSceneData);
        }
        
        protected virtual void SceneActivatorSystemDeconstructSceneHandler(FlipCube.DeconstructScene data, SceneInstance sceneinstance) {
        }
        
        protected void SceneActivatorSystemDeconstructSceneFilter(FlipCube.DeconstructScene data) {
            var SceneInstanceSceneInstance = SceneInstanceManager[data.SceneInstance];
            if (SceneInstanceSceneInstance == null) {
                return;
            }
            if (!SceneInstanceSceneInstance.Enabled) {
                return;
            }
            this.SceneActivatorSystemDeconstructSceneHandler(data, SceneInstanceSceneInstance);
        }
    }
    
    [uFrame.Attributes.uFrameIdentifier("2a803dc9-757f-4430-a0ea-413ae8348ad9")]
    public partial class SceneActivatorSystem : SceneActivatorSystemBase {
        
        private static SceneActivatorSystem _Instance;
        
        public SceneActivatorSystem() {
            Instance = this;
        }
        
        public static SceneActivatorSystem Instance {
            get {
                return _Instance;
            }
            set {
                _Instance = value;
            }
        }
    }
}
